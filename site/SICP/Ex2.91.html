<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smatchcube | Exercise 2.91</title>
<style>
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
</head>
<body>
<header>
  <h1>Smatchcube's website</h1>
  <hr>
</header>
<nav>
<p>/<a href="../index.html">home</a>/<a href="../SICP.html">SICP</a>/Exercise 2.91</p>
</nav>
<main>
<div id="header">
<h1 class="title">Exercise 2.91</h1>
</div>
<p>Let's use the sparse representation only with the code we used before the previous exercise, it will make everything much more simple.\ So here is the code completed to make the divisions of terms:</p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme">(<span class="kw">define</span><span class="fu"> </span>(div-terms L1 L2)
  (<span class="kw">if</span> (empty-termlist? L1)
      (<span class="kw">list</span> (the-empty-termlist) (the-empty-termlist))
      (<span class="kw">let</span> ((t1 (first-term L1))
            (t2 (first-term L2)))
        (<span class="kw">if</span> (<span class="kw">&gt;</span> (order t2) (order t1))
            (<span class="kw">list</span> (the-empty-termlist) L1)
            (<span class="kw">let</span> ((new-c (div (coeff t1) (coeff t2)))
                  (new-o (<span class="kw">-</span> (order t1) (order t2))))
              (<span class="kw">let</span> ((rest-of-result
                     (div-terms (add-terms (rest-terms L1)
                                           (neg-terms
                                            (mul-term-by-all-terms
                                             (make-term new-o new-c)
                                             (rest-terms L2))))
                                L2)))
                (<span class="kw">list</span> (adjoin-term (make-term new-o new-c) (<span class="kw">car</span> rest-of-result))
                      (<span class="kw">cadr</span> rest-of-result))
                ))))))</code></pre></div>
<p>The result is a list with a list of the terms of the quotient as a first element and a list of terms of the remainder as the second element.\ Now we can define the <code>div-poly</code> and the division for polynomials:</p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme">(<span class="kw">define</span><span class="fu"> </span>(div-poly p1 p2)
  (<span class="kw">if</span> (same-variable? (variable p1) (variable p2))
      (<span class="kw">let</span> ((terms (div-terms (term-list p1) (term-list p2))))
        (<span class="kw">list</span> (make-polynomial (variable p1) (<span class="kw">car</span> terms))
              (make-polynomial (variable p1) (<span class="kw">cadr</span> terms))))
      (error <span class="st">&quot;Polys not in same var: DIV-POLY&quot;</span>)))
(put &#39;div &#39;(polynomial polynomial)
     (<span class="kw">lambda</span> (p1 p2) (div-poly p1 p2)))</code></pre></div>
<p>The result is a list of polynomials, the first polynomial is the quotient, the second is the remainder. Here is a test on division from the book:</p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme">(div (make-polynomial &#39;x &#39;((<span class="dv">5</span> <span class="dv">1</span>) (<span class="dv">0</span> -<span class="dv">1</span>))) (make-polynomial &#39;x &#39;((<span class="dv">2</span> <span class="dv">1</span>) (<span class="dv">0</span> -<span class="dv">1</span>))))
<span class="co">; =&gt; ((polynomial x (3 1) (1 1)) (polynomial x (1 1) (0 -1)))</span></code></pre></div>
</main>
<footer>
<hr>
<!--<a href="http://www.w3.org/html/logo/">
<img src="https://www.w3.org/html/logo/downloads/HTML5_1Color_Black.svg" width="63" height="64" alt="HTML5 Powered" title="HTML5 Powered">
</a>-->
</footer>
</body>
</html>
